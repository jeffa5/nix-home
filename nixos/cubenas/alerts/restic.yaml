groups:
- name: Prometheus
  rules:
  - alert: ResticOutdatedBackup
    # 1209600 = 15 days
    expr: time() - restic_snapshot_latest_time_seconds > 1209600
    for: 0m
    labels:
      severity: critical
    annotations:
      summary: Restic {{ $labels.hostname }} / {{ $labels.repo }} backup is outdated
      description: "Restic backup is outdated\n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}"
